version: 1
frontend:
  phases:
    preBuild:
      commands:
        - cd angularweb
        - npm install -g @angular/cli
        - npm ci --cache .npm --prefer-offline
        - npm install puppeteer --save-dev
        - export CHROME_BIN=$(node -e "console.log(require('puppeteer').executablePath())")
#        - ng test --watch=false --code-coverage --browsers ChromeHeadless
    build:
      commands:
        - cd angularweb
        - ng build --configuration=production
  artifacts:
    baseDirectory: angularweb/dist/autoperfecto
    files:
      - '**/*'
  cache:
    paths:
      - angularweb/node_modules/**/*
